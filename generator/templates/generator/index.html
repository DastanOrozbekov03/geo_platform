<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Генерация PDF — Generator</title>
<style>
body{font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background:#f5f7fb; color:#111;}
.container{max-width:720px;margin:64px auto;padding:24px;background:#fff;border-radius:12px;box-shadow:0 6px 24px rgba(16,24,40,0.08);}
h1{margin:0 0 8px;font-size:20px}
p{margin:0 0 18px;color:#4b5563}
.controls{display:flex;gap:12px;align-items:center}
button{padding:10px 16px;border-radius:8px;border:none;background:#0b5fff;color:#fff;cursor:pointer;font-weight:600}
button:active{transform:translateY(1px)}
.note{margin-top:14px;font-size:13px;color:#6b7280}
</style>
</head>
<body>
<main class="container">
<h1>Генерация PDF с задачами</h1>
<p>Нажмите кнопку — сервер вернёт PDF с задачами из модуля <code>tasks.tasks</code>.</p>


<div class="controls">
<form id="pdfForm" action="/generator/pdf/" method="get">
<button type="submit">Сгенерировать PDF</button>
</form>


<button id="downloadFetch">Сгенерировать (fetch)</button>
</div>


<p class="note">Если PDF не скачивается автоматически, проверь настройки браузера: некоторые браузеры открывают PDF в новой вкладке.</p>
</main>


<script>
// Альтернативный способ — получить PDF через fetch и сохранить как файл.
document.getElementById('downloadFetch').addEventListener('click', async function(){
try{
const resp = await fetch('/generator/pdf/');
if(!resp.ok) throw new Error('Ошибка при получении PDF');
const blob = await resp.blob();
const url = URL.createObjectURL(blob);
const a = document.createElement('a');
a.href = url;
a.download = 'tasks.pdf';
document.body.appendChild(a);
a.click();
a.remove();
URL.revokeObjectURL(url);
}catch(e){
alert('Не удалось сгенерировать PDF: ' + e.message);
}
});
</script>
</body>
</html>